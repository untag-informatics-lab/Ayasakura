{% extends "partials/_base.html" %}

{% load static %}
{% load crispy_forms_tags %}

{% block title %}
    Sensor Configuration
{% endblock %}

{% block css %}
    {{ block.super }}
{% endblock %}

{% block javascript %}
    {{ block.super }}   
{% endblock %}

{% block content %}
    <div class="slim-mainpanel">
        <div class="container">
            <div class="slim-pageheader">
                <ol class="breadcrumb slim-breadcrumb">
                    <li class="breadcrumb-item"><a href="/application">Pond IoT</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Sensor Configuration</li>
                </ol>
                <h6 class="slim-pagetitle">Sensor Configuration</h6>
            </div><!-- slim-pageheader -->

            {% if messages %}
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }}" role="alert">
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                        </button>
                        {{ message }}
                    </div>                                                
                {% endfor %}
            {% endif %}
            <div class="row">
                <div class="col-md-4">
                    <div class="card card-profile">
                        <div class="card-header">
                            <strong>Current Condition</strong>
                        </div>
                        <div class="card-body">                            
                            <table class="table table-borderless table-striped">                                
                                <tbody>
                                    <tr>
                                        <td>Oxygen</td>
                                        <td></td>
                                        <td>{{ sensor_data.ideal_oxygen_min }}% ~ {{ sensor_data.ideal_oxygen_max }}%</td>
                                    </tr>
                                    <tr>
                                        <td>Temp.</td>
                                        <td></td>
                                        <td>{{ sensor_data.ideal_temperature_min }}°C ~ {{ sensor_data.ideal_temperature_max }}°C</td>
                                    </tr>
                                    <tr>
                                        <td>pH</td>
                                        <td></td>
                                        <td>{{ sensor_data.ideal_ph_min }} ~ {{ sensor_data.ideal_ph_max }}</td>
                                    </tr>
                                    <tr>
                                        <td>TDS</td>
                                        <td></td>
                                        <td>{{ sensor_data.ideal_tds_min }} ~ {{ sensor_data.ideal_tds_max }}  mg/L</td>
                                    </tr>
                                    <tr>
                                        <td>turbidity</td>
                                        <td></td>
                                        <td>{{ sensor_data.ideal_turbidity_min }} ~ {{ sensor_data.ideal_turbidity_max }}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div><!-- card-body -->                       
                      </div>
                </div>
                <div class="col-md-8">
                    <div class="section-wrapper">
                        <label class="section-title">Sensor Ideal Value</label>
                        <p class="mg-b-20 mg-sm-b-40">Set your ideal value for your pond sensor.</p>

                        {% if condition_data == 0 %}
                            <div class="row">
                                <div class="col-md-4 offset-4">
                                    <a href="/application/sensor/configuration/activate" class="btn btn-success">Activate Configuration</a>                          
                                </div>
                            </div>
                        {% else %}
                            <form action="/application/sensor/configuration" method="POST">
                                {% csrf_token %}
                                <div class="row">                                   
                                </div>
                                <div class="row">
                                    <div class="col-md-6">{{ form.ideal_oxygen_min|as_crispy_field }}</div>
                                    <div class="col-md-6">{{ form.ideal_oxygen_max|as_crispy_field }}</div>
                                </div>                                                                                
                            
                                <div class="row">
                                    <div class="col-md-6">{{ form.ideal_temperature_min|as_crispy_field }}</div>
                                    <div class="col-md-6">{{ form.ideal_temperature_max|as_crispy_field }}</div>
                                </div>                                                                                
                                                                      
                                <div class="row">
                                    <div class="col-md-6">{{ form.ideal_ph_min|as_crispy_field }}</div>
                                    <div class="col-md-6">{{ form.ideal_ph_max|as_crispy_field }}</div>
                                </div>                                    
                                        
                                <div class="row">
                                    <div class="col-md-6">{{ form.ideal_tds_min|as_crispy_field }}</div>
                                    <div class="col-md-6">{{ form.ideal_tds_max|as_crispy_field }}</div>
                                </div>                                                                                                                            

                                <div class="row">
                                    <div class="col-md-6">{{ form.ideal_turbidity_min|as_crispy_field }}</div>
                                    <div class="col-md-6">{{ form.ideal_turbidity_max|as_crispy_field }}</div>
                                </div>
            
                                <div class="row">
                                    <div class="col-md-4 offset-4">
                                        <button type="submit" class="btn btn-warning">Save Configuration</button>                          
                                    </div>
                                </div>
                            </form>
                        {% endif %}
                    </div><!-- section-wrapper -->        
                </div>
            </div>
        </div><!-- container -->
    </div><!-- slim-mainpanel -->
{% endblock %}
